<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>3 AM Demon Escape - Thal’zorak</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    /* Sass compiled styles */
    body {
      background: linear-gradient(to bottom, #120000, #330000);
      color: #f2f2f2;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-shadow: 0 0 5px #990000;
    }
    h1 {
      text-shadow: 0 0 10px #ff4444;
      margin-bottom: 0.5rem;
    }
    #gameArea {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #660000;
      border-radius: 10px;
      padding: 20px;
      max-width: 500px;
      min-height: 250px;
      box-shadow: 0 0 20px #990000;
    }
    button {
      margin-top: 15px;
    }
    .tool-btn {
      margin: 5px 5px 0 0;
    }
    input.form-control {
      max-width: 300px;
      margin: 0 auto 15px auto;
      background: #330000;
      border: 1px solid #660000;
      color: #f2f2f2;
      text-shadow: none;
    }
    input::placeholder {
      color: #aa4444;
    }
  </style>
</head>
<body class="text-center">
  <h1>3 AM Demon Escape</h1>
  <div id="gameArea">
    <p>Welcome, brave soul. What is your name?</p>
    <input type="text" id="playerNameInput" class="form-control" placeholder="Enter your name..." autofocus />
    <button id="startBtn" class="btn btn-danger">Summon Thal’zorak</button>
  </div>

  <script>
    // Constants and variables
    const demonName = "Thal’zorak";
    const tools = ['Holy Water', 'Magic Salt', 'Ancient Amulet'];

    const gameArea = document.getElementById("gameArea");
    const startBtn = document.getElementById("startBtn");
    const playerNameInput = document.getElementById("playerNameInput");

    let playerName = "";
    let hasSummoned = false;
    let isTalking = false;
    let isEscaping = false;
    let usedTools = new Set();

    // Start the game when summon button clicked
    startBtn.addEventListener("click", () => {
      let inputName = playerNameInput.value.trim();
      if(!inputName) {
        alert("Please enter your name, fearless one!");
        playerNameInput.focus();
        return;
      }
      playerName = inputName;
      summonDemon();
    });

    function summonDemon(){
      hasSummoned = true;
      gameArea.innerHTML = `
        <p><strong>${playerName}</strong>, the clock strikes 3:00 AM in the haunted night.</p>
        <p>You open the ancient book and begin the ritual to summon <strong>${demonName}</strong>.</p>
        <p>The air grows thick... A chilling shadow lurks.</p>
        <p><strong>${demonName}</strong> has appeared!</p>
        <p>What will you do? Speak wisely...</p>
        <button id="talkBtn" class="btn btn-warning">Talk to ${demonName}</button>
        <button id="tryEscapeBtn" class="btn btn-success">Try to Escape</button>
        <div id="dialogue" class="mt-3"></div>
        <div id="toolsArea" class="mt-3"></div>
      `;

      document.getElementById("talkBtn").addEventListener("click", talkToDemon);
      document.getElementById("tryEscapeBtn").addEventListener("click", tryEscape);
    }

    function talkToDemon(){
      if(isTalking || isEscaping) return;
      isTalking = true;
      const dialogue = document.getElementById("dialogue");
      dialogue.innerHTML = `<p><em>${demonName} whispers:</em> “Speak, mortal...”</p>`;

      const questions = [
        `"Why have you summoned me, ${playerName}?"`,
        `"Do you possess the strength to undo this pact?"`,
        `"What do you seek in the darkness?"`,
      ];
      let index = 0;

      const questionP = document.createElement("p");
      questionP.textContent = questions[index];
      dialogue.appendChild(questionP);

      const nextBtn = document.createElement("button");
      nextBtn.textContent = "Next Question";
      nextBtn.className = "btn btn-info btn-sm mt-2";
      dialogue.appendChild(nextBtn);

      nextBtn.addEventListener("click", () => {
        index++;
        if(index < questions.length){
          questionP.textContent = questions[index];
        } else {
          dialogue.innerHTML += `<p><strong>${demonName}</strong> laughs darkly: “Your fate has already been cast...”</p>`;
          isTalking = false;
        }
      });
    }

    function tryEscape(){
      if(isEscaping || isTalking) return;
      isEscaping = true;
      usedTools.clear();

      const dialogue = document.getElementById("dialogue");
      dialogue.innerHTML = `<p>You gather your courage and prepare to escape using your tools.</p>`;

      const toolsArea = document.getElementById("toolsArea");
      toolsArea.innerHTML = "";
      tools.forEach(tool => {
        const btn = document.createElement("button");
        btn.textContent = tool;
        btn.className = "btn btn-outline-light tool-btn";
        btn.addEventListener("click", () => useTool(tool));
        toolsArea.appendChild(btn);
      });
    }

    function useTool(tool){
      if(usedTools.has(tool)){
        const dialogue = document.getElementById("dialogue");
        dialogue.innerHTML += `<p>You have already used the <em>${tool}</em>.</p>`;
        return;
      }
      usedTools.add(tool);

      const dialogue = document.getElementById("dialogue");
      dialogue.innerHTML += `<p>You use the <em>${tool}</em>! It glows with ancient power.</p>`;

      if(usedTools.size === tools.length){
        dialogue.innerHTML += `<p><strong>The demonic shrieks of ${demonName} fill the air, then fade...</strong></p>`;
        dialogue.innerHTML += `<p>You escaped the night unscathed, ${playerName}. Your bravery is your shield.</p>`;
        document.getElementById("toolsArea").innerHTML = "";
        isEscaping = false;
      } else {
        dialogue.innerHTML += `<p><strong>More tools needed to banish ${demonName}!</strong></p>`;
      }
    }

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
